{
    "collab_server" : "",
    "contents" : "## Met ton directory à l'emplacement des fichiers ci-dessous.\n\n\nfiles <- c(\"NA.TO\",\t\"BCE.TO\",\t\"CNR.TO\",\t\"RY.TO\",\t\"ATD-B.TO\",\t\"GIBA.TO\",\t\"DOL.TO\",\n  \"BMO.TO\",\t\"POW.TO\",\t\"MRU.TO\",\t\"QBRB.TO\",\t\"PWF.TO\",   \"SAP.TO\"\t,\"IAG.TO\",\n  \"AC.TO\",\t\"CAE.TO\",\t\"SNC.TO\",\t\"PJC-A.TO\",\t\"BBDB.TO\",\t\"TAP\",\t\"LB.TO\",\n  \"DOO.TO\",\t\"CCA.TO\",\t\"TCL-A.TO\",\t\"GIL.TO\",\t\"RCH.TO\",\t\"TFII.TO\",\t\"BLX.TO\",\n  \"WSP.TO\",\t\"INE.TO\")\n\n\nADJ <- list()\nfor (i in files){\n    ## Read\n    input <- read.csv(paste(i,\".csv\",sep = \"\"), header = TRUE)\n    \n    ## RegExp\n    pattern <-  \"\\\\d+-03-01\"\n    match <- regmatches(input[[1]],gregexpr(pattern, input[[1]]))\n    \n    ## Prises des données correspondantes aux dates trouvés\n    values <- input$Adj.Close[input$Date == match]\n    values <- rev(values) ## Inversion\n    match <- rev(unlist(Filter(length,match))) ## Mise en forme des noms\n    names(values) <- match ## Attribution des noms\n\n    ADJ[[i]] <- values ## Ajout des valeurs à la liste\n}\n\n## Guillaume Michel ---\nfor(i in 6:21)\n{\n    ADJ[[\"DOO.TO\"]][i] <- ADJ[[\"DOO.TO\"]][i-1] * ADJ[[\"BBDB.TO\"]][[i]]/ADJ[[\"BBDB.TO\"]][[i-1]]\n}\n\ngm_mean <- function(x) exp(sum(log(x[x > 0])) / length(x))\nmeanADJ <- lapply(ADJ,gm_mean) ## Moyenne\nvarADJ  <- lapply(ADJ,function(x) sqrt(var(x))) ## Ecart-Type\n\n## Init\ncovADJ <- matrix(numeric(30^2),ncol = 30, nrow = 30)\ncorADJ <- matrix(numeric(30^2),ncol =30)\nfor(i in 1:30){\n    for(j in 1:30){\n        ## Covariance et correlation avec les donnes disponibles.\n        m <- min(c(length(ADJ[[i]]),length(ADJ[[j]])))\n        covADJ[i,j] <- cov(ADJ[[i]][seq(m)],ADJ[[j]][seq(m)])\n        corADJ[i,j] <- cor(ADJ[[i]][seq(m)],ADJ[[j]][seq(m)])\n    }\n    \n}\n\nfileOut <- file(\"ADJ.csv\")\n\n## Remplissage des valeurs vides pour des strings nulle afin d'avoir des données\n## de longueurs identiques\nfor(i in seq_len(30)){\n    if(length(ADJ[[i]]) != 21){\n        ADJ[[i]] <- c(ADJ[[i]],rep(\"\",21 - length(ADJ[[i]])))\n    }\n}\n\ndir.create(file.path(getwd(), \"Computation\"), showWarnings = FALSE)\nsetwd(file.path(getwd(), \"Computation\"))\n\n## Write out\nwrite.table(ADJ,fileOut,sep=\";\", col.names=FALSE, dec = \",\")\nwrite.csv2(covADJ,\"Cov.csv\")\nwrite.csv2(corADJ,\"Cor.csv\")\nwrite.csv2(meanADJ,\"Mean.csv\")\nwrite.csv2(varADJ,\"Ecart.csv\")\n",
    "created" : 1522784829952.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4205388866",
    "id" : "21B0F174",
    "lastKnownWriteTime" : 1522794348,
    "last_content_update" : 1522794348935,
    "path" : "~/Actuariat/Première année/Session 2/Gestion du risque financier/convert.R",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 9,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}